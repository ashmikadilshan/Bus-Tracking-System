<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard - Fleet Management</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    .admin-hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f5576c 100%);
      color: white;
      padding: 2.5rem 2rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    }

    .admin-hero h2 {
      font-size: 2.2rem;
      margin-bottom: 0.5rem;
      color: white;
      border: none;
    }

    .admin-hero p {
      opacity: 0.95;
      margin-bottom: 1.5rem;
      font-size: 1rem;
    }

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .metric-card {
      background: rgba(255, 255, 255, 0.15);
      padding: 1rem;
      border-radius: 10px;
      backdrop-filter: blur(10px);
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .metric-card .value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #ffd700;
    }

    .metric-card .label {
      font-size: 0.85rem;
      opacity: 0.9;
      margin-top: 0.5rem;
    }

    .admin-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .admin-card {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    .admin-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .admin-card h3 {
      color: #667eea;
      margin-bottom: 1.5rem;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid #f0f0f0;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.6rem;
      font-weight: 600;
      color: #333;
      font-size: 0.95rem;
    }

    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 0.9rem 1rem;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.3s ease;
    }

    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .form-row .form-group {
      margin-bottom: 0;
    }

    .btn-admin {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.6rem;
      width: 100%;
    }

    .btn-admin:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .btn-admin:active {
      transform: translateY(0);
    }

    .message-box {
      margin-top: 1.5rem;
      padding: 1.5rem;
      border-radius: 10px;
      display: none;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message-success {
      background: #d4edda;
      color: #155724;
      border-left: 5px solid #28a745;
      display: flex;
      align-items: flex-start;
      gap: 1rem;
    }

    .message-success i {
      font-size: 1.3rem;
      margin-top: 0.2rem;
      flex-shrink: 0;
    }

    .message-error {
      background: #f8d7da;
      color: #721c24;
      border-left: 5px solid #f5576c;
      display: flex;
      align-items: flex-start;
      gap: 1rem;
    }

    .message-error i {
      font-size: 1.3rem;
      margin-top: 0.2rem;
      flex-shrink: 0;
    }

    .message-info {
      background: #d1ecf1;
      color: #0c5460;
      border-left: 5px solid #17a2b8;
      display: flex;
      align-items: flex-start;
      gap: 1rem;
    }

    .message-info i {
      font-size: 1.3rem;
      margin-top: 0.2rem;
      flex-shrink: 0;
    }

    .info-text {
      flex: 1;
    }

    .info-text strong {
      display: block;
      margin-bottom: 0.3rem;
    }

    .info-text code {
      background: rgba(0, 0, 0, 0.1);
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: monospace;
    }

    .help-box {
      background: #f8f9fa;
      border-left: 4px solid #667eea;
      padding: 1.5rem;
      border-radius: 8px;
      margin-top: 1.5rem;
      font-size: 0.95rem;
      color: #555;
    }

    .help-box strong {
      color: #667eea;
      display: block;
      margin-bottom: 0.5rem;
    }

    .help-box ul {
      margin: 0.8rem 0 0 1.5rem;
      padding: 0;
    }

    .help-box li {
      margin-bottom: 0.5rem;
    }

    .tabs {
      display: flex;
      gap: 0;
      margin-bottom: 2rem;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .tab-btn {
      flex: 1;
      padding: 1.2rem;
      border: none;
      background: white;
      color: #666;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      border-bottom: 3px solid transparent;
    }

    .tab-btn:hover {
      background: #f8f9fa;
      border-bottom-color: #ddd;
    }

    .tab-btn.active {
      color: #667eea;
      border-bottom-color: #667eea;
      background: #f8f9fa;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .status-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    .status-table th {
      background: #f8f9fa;
      padding: 1rem;
      text-align: left;
      font-weight: 600;
      color: #333;
      border-bottom: 2px solid #e0e0e0;
    }

    .status-table td {
      padding: 0.9rem 1rem;
      border-bottom: 1px solid #f0f0f0;
    }

    .status-table tr:hover {
      background: #f8f9fa;
    }

    @media (max-width: 768px) {
      .admin-hero {
        padding: 1.5rem 1rem;
      }

      .admin-hero h2 {
        font-size: 1.5rem;
      }

      .admin-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .admin-card {
        padding: 1.5rem;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .tabs {
        flex-direction: column;
      }

      .tab-btn {
        border-bottom: 3px solid #ddd;
        border-left: 3px solid transparent;
      }

      .tab-btn.active {
        border-bottom: 3px solid #667eea;
        border-left: 3px solid #667eea;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>‚öôÔ∏è Admin Dashboard</h1>
    <nav>
      <a href="index.html">Passenger</a>
      <a href="driver.html">Driver</a>
      <a href="admin.html" class="active">Admin</a>
      <a href="dashboard.html">Dashboard</a>
      <a href="login.html" style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 0.8rem 1.5rem; border-radius: 8px; color: white !important;">Login</a>
    </nav>
  </header>

  <main>
    <!-- Hero Section -->
    <section class="admin-hero">
      <h2>üè¢ Fleet Management System</h2>
      <p>Manage buses, drivers, routes, and system operations with comprehensive controls</p>
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="value" id="totalBuses">0</div>
          <div class="label">Total Buses</div>
        </div>
        <div class="metric-card">
          <div class="value" id="activeDrivers">0</div>
          <div class="label">Active Drivers</div>
        </div>
        <div class="metric-card">
          <div class="value" id="activeRoutes">0</div>
          <div class="label">Routes</div>
        </div>
        <div class="metric-card">
          <div class="value" id="systemStatus">‚úÖ</div>
          <div class="label">System</div>
        </div>
      </div>
    </section>

    <!-- Tab Navigation -->
    <div class="tabs">
      <button class="tab-btn active" onclick="switchTab('buses')">
        <i class="fas fa-bus"></i> Buses
      </button>
      <button class="tab-btn" onclick="switchTab('drivers')">
        <i class="fas fa-user-tie"></i> Drivers
      </button>
      <button class="tab-btn" onclick="switchTab('routes')">
        <i class="fas fa-map"></i> Routes
      </button>
      <button class="tab-btn" onclick="switchTab('assign')">
        <i class="fas fa-link"></i> Assignments
      </button>
      <button class="tab-btn" onclick="switchTab('system')">
        <i class="fas fa-cog"></i> System
      </button>
    </div>

    <!-- Buses Tab -->
    <div id="buses" class="tab-content active">
      <div class="admin-grid">
        <div class="admin-card">
          <h3><i class="fas fa-plus-circle"></i> Add New Bus</h3>
          
          <div class="form-group">
            <label for="plate">Bus Plate Number</label>
            <input id="plate" type="text" placeholder="e.g., BUS-001" />
          </div>

          <div class="form-group">
            <label for="cap">Passenger Capacity</label>
            <input id="cap" type="number" placeholder="e.g., 40" min="1" />
          </div>

          <div class="form-group">
            <label for="busModel">Bus Model</label>
            <input id="busModel" type="text" placeholder="e.g., Mercedes Sprinter" />
          </div>

          <button class="btn-admin" id="createBus">
            <i class="fas fa-check-circle"></i> Create Bus
          </button>

          <div id="busMessage" class="message-box"></div>

          <div class="help-box">
            <strong>üí° Bus Creation Tips:</strong>
            <ul>
              <li>Use unique plate numbers (e.g., BUS-001, NB-101)</li>
              <li>Standard capacity: 40-60 passengers</li>
              <li>Ensure data accuracy for proper tracking</li>
            </ul>
          </div>
        </div>

        <div class="admin-card">
          <h3><i class="fas fa-list"></i> Bus List</h3>
          <div id="busList" style="margin-top: 1rem;">
            <p style="color: #999; text-align: center;">Loading buses...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Drivers Tab -->
    <div id="drivers" class="tab-content">
      <div class="admin-grid">
        <div class="admin-card">
          <h3><i class="fas fa-user-plus"></i> Add New Driver</h3>
          
          <div class="form-group">
            <label for="driverName">Driver Name</label>
            <input id="driverName" type="text" placeholder="e.g., John Silva" />
          </div>

          <div class="form-group">
            <label for="driverPhone">Phone Number</label>
            <input id="driverPhone" type="tel" placeholder="e.g., +94701234567" />
          </div>

          <div class="form-group">
            <label for="driverLicense">License Number</label>
            <input id="driverLicense" type="text" placeholder="e.g., DL-2024-001" />
          </div>

          <button class="btn-admin" id="createDriver">
            <i class="fas fa-check-circle"></i> Add Driver
          </button>

          <div id="driverMessage" class="message-box"></div>

          <div class="help-box">
            <strong>üí° Driver Registration Tips:</strong>
            <ul>
              <li>Verify license validity before registration</li>
              <li>Maintain contact information for emergencies</li>
              <li>Conduct background checks</li>
            </ul>
          </div>
        </div>

        <div class="admin-card">
          <h3><i class="fas fa-users"></i> Driver List</h3>
          <div id="driverList" style="margin-top: 1rem;">
            <p style="color: #999; text-align: center;">Loading drivers...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Routes Tab -->
    <div id="routes" class="tab-content">
      <div class="admin-grid">
        <div class="admin-card">
          <h3><i class="fas fa-route"></i> Create Route</h3>
          
          <div class="form-group">
            <label for="routeName">Route Name</label>
            <input id="routeName" type="text" placeholder="e.g., Fort to Dehiwala" />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="routeStart">Starting Point</label>
              <input id="routeStart" type="text" placeholder="e.g., Fort" />
            </div>
            <div class="form-group">
              <label for="routeEnd">End Point</label>
              <input id="routeEnd" type="text" placeholder="e.g., Dehiwala" />
            </div>
          </div>

          <div class="form-group">
            <label for="routeStops">Number of Stops</label>
            <input id="routeStops" type="number" placeholder="e.g., 8" min="1" />
          </div>

          <button class="btn-admin" id="createRoute">
            <i class="fas fa-check-circle"></i> Create Route
          </button>

          <div id="routeMessage" class="message-box"></div>
        </div>

        <div class="admin-card">
          <h3><i class="fas fa-map-location-dot"></i> Route List</h3>
          <div id="routeList" style="margin-top: 1rem;">
            <p style="color: #999; text-align: center;">Loading routes...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Assignments Tab -->
    <div id="assign" class="tab-content">
      <div class="admin-card" style="max-width: 600px;">
        <h3><i class="fas fa-link"></i> Assign Bus to Route & Driver</h3>

        <div class="form-group">
          <label for="assign_bus">Bus ID</label>
          <input id="assign_bus" type="number" placeholder="Enter bus ID" min="1" />
        </div>

        <div class="form-group">
          <label for="assign_driver">Driver ID</label>
          <input id="assign_driver" type="number" placeholder="Enter driver ID" min="1" />
        </div>

        <div class="form-group">
          <label for="assign_route">Route ID</label>
          <input id="assign_route" type="number" placeholder="Enter route ID" min="1" />
        </div>

        <div class="form-group">
          <label for="assignDate">Assignment Date</label>
          <input id="assignDate" type="date" />
        </div>

        <button class="btn-admin" id="assignBtn">
          <i class="fas fa-link"></i> Assign Now
        </button>

        <div id="assignMessage" class="message-box"></div>

        <div class="help-box" style="margin-top: 2rem;">
          <strong>üìã Assignment Guidelines:</strong>
          <ul>
            <li>Each bus should have one primary driver per shift</li>
            <li>Verify bus condition before assignment</li>
            <li>Check driver availability and licenses</li>
            <li>Ensure route compatibility with bus capacity</li>
            <li>Keep assignment history for auditing</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- System Tab -->
    <div id="system" class="tab-content">
      <div class="admin-grid">
        <div class="admin-card">
          <h3><i class="fas fa-database"></i> System Overview</h3>
          
          <table class="status-table">
            <tr>
              <th>Component</th>
              <th>Status</th>
            </tr>
            <tr>
              <td><i class="fas fa-server"></i> Database</td>
              <td><span style="color: #28a745;"><i class="fas fa-check-circle"></i> Connected</span></td>
            </tr>
            <tr>
              <td><i class="fas fa-broadcast-tower"></i> WebSocket</td>
              <td><span style="color: #28a745;"><i class="fas fa-check-circle"></i> Active</span></td>
            </tr>
            <tr>
              <td><i class="fas fa-map"></i> Map API</td>
              <td><span style="color: #28a745;"><i class="fas fa-check-circle"></i> Online</span></td>
            </tr>
            <tr>
              <td><i class="fas fa-shield"></i> Security</td>
              <td><span style="color: #28a745;"><i class="fas fa-check-circle"></i> Secure</span></td>
            </tr>
          </table>

          <div class="help-box" style="margin-top: 1.5rem;">
            <strong>üîí Security Reminder:</strong>
            <p>Always use strong passwords, enable two-factor authentication, and regularly backup your database.</p>
          </div>
        </div>

        <div class="admin-card">
          <h3><i class="fas fa-tools"></i> System Maintenance</h3>
          
          <button class="btn-admin" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); margin-bottom: 1rem;">
            <i class="fas fa-refresh"></i> Clear Cache
          </button>

          <button class="btn-admin" style="background: linear-gradient(135deg, #16a085 0%, #1abc9c 100%); margin-bottom: 1rem;">
            <i class="fas fa-download"></i> Backup Database
          </button>

          <button class="btn-admin" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);">
            <i class="fas fa-exclamation-triangle"></i> System Logs
          </button>

          <div class="help-box" style="margin-top: 1.5rem;">
            <strong>‚öôÔ∏è Maintenance Tips:</strong>
            <ul>
              <li>Clear cache weekly to optimize performance</li>
              <li>Backup database daily</li>
              <li>Review logs for errors and anomalies</li>
              <li>Update system regularly for security patches</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>‚öôÔ∏è Developed by Team 3DNA | Admin Panel ¬© 2025</footer>

  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <script>
    const api = '/api/admin'

    // Tab Switching
    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'))
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'))

      // Show selected tab
      document.getElementById(tabName).classList.add('active')
      event.target.closest('.tab-btn').classList.add('active')
    }

    // Show messages with icons and animations
    function showMessage(elementId, message, type = 'success') {
      const element = document.getElementById(elementId)
      const iconMap = {
        success: 'fa-check-circle',
        error: 'fa-exclamation-circle',
        info: 'fa-info-circle'
      }
      element.className = `message-box message-${type}`
      element.innerHTML = `
        <i class="fas ${iconMap[type]}"></i>
        <div class="info-text">
          <strong>${type.toUpperCase()}</strong>
          ${typeof message === 'string' ? message : JSON.stringify(message, null, 2)}
        </div>
      `
      element.style.display = 'flex'

      setTimeout(() => {
        element.style.display = 'none'
      }, 6000)
    }

    // Load Metrics
    async function loadMetrics() {
      try {
        const res = await fetch(`${api}/stats`)
        if (res.ok) {
          const data = await res.json()
          document.getElementById('totalBuses').textContent = data.buses || 0
          document.getElementById('activeDrivers').textContent = data.drivers || 0
          document.getElementById('activeRoutes').textContent = data.routes || 0
        }
      } catch (e) {
        console.error('Failed to load metrics:', e)
      }
    }

    // Create Bus
    document.getElementById('createBus').addEventListener('click', async () => {
      const plate = document.getElementById('plate').value.trim()
      const cap = parseInt(document.getElementById('cap').value) || 40
      const model = document.getElementById('busModel').value.trim()

      if (!plate) {
        showMessage('busMessage', 'Please enter a plate number', 'error')
        return
      }

      try {
        const res = await fetch(`${api}/buses`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ plate_number: plate, capacity: cap, model: model || 'Standard' })
        })
        
        if (!res.ok) {
          const errorData = await res.json()
          throw new Error(errorData.error || `HTTP error! status: ${res.status}`)
        }
        
        const data = await res.json()

        showMessage('busMessage', `‚úÖ Bus ${plate} created successfully!`, 'success')
        document.getElementById('plate').value = ''
        document.getElementById('cap').value = ''
        document.getElementById('busModel').value = ''
        loadMetrics()
      } catch (e) {
        console.error('Bus creation error:', e)
        showMessage('busMessage', `Error: ${e.message}`, 'error')
      }
    })

    // Create Driver
    document.getElementById('createDriver').addEventListener('click', async () => {
      const name = document.getElementById('driverName').value.trim()
      const phone = document.getElementById('driverPhone').value.trim()
      const license = document.getElementById('driverLicense').value.trim()

      if (!name || !phone || !license) {
        showMessage('driverMessage', 'Please fill in all driver fields', 'error')
        return
      }

      try {
        const res = await fetch(`${api}/drivers`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, phone, license_number: license })
        })
        
        if (!res.ok) {
          const errorData = await res.json()
          throw new Error(errorData.error || `HTTP error! status: ${res.status}`)
        }
        
        const data = await res.json()

        showMessage('driverMessage', `‚úÖ Driver ${name} added successfully!`, 'success')
        document.getElementById('driverName').value = ''
        document.getElementById('driverPhone').value = ''
        document.getElementById('driverLicense').value = ''
        loadMetrics()
      } catch (e) {
        console.error('Driver creation error:', e)
        showMessage('driverMessage', `Error: ${e.message}`, 'error')
      }
    })

    // Create Route
    document.getElementById('createRoute').addEventListener('click', async () => {
      const name = document.getElementById('routeName').value.trim()
      const start = document.getElementById('routeStart').value.trim()
      const end = document.getElementById('routeEnd').value.trim()
      const stops = parseInt(document.getElementById('routeStops').value) || 1

      if (!name || !start || !end) {
        showMessage('routeMessage', 'Please fill in all route fields', 'error')
        return
      }

      try {
        const res = await fetch(`${api}/routes`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, start_point: start, end_point: end, stops_count: stops })
        })
        
        if (!res.ok) {
          const errorData = await res.json()
          throw new Error(errorData.error || `HTTP error! status: ${res.status}`)
        }
        
        const data = await res.json()

        showMessage('routeMessage', `‚úÖ Route ${name} created successfully!`, 'success')
        document.getElementById('routeName').value = ''
        document.getElementById('routeStart').value = ''
        document.getElementById('routeEnd').value = ''
        document.getElementById('routeStops').value = ''
        loadMetrics()
      } catch (e) {
        console.error('Route creation error:', e)
        showMessage('routeMessage', `Error: ${e.message}`, 'error')
      }
    })

    // Assign Bus to Driver & Route
    document.getElementById('assignBtn').addEventListener('click', async () => {
      const bus_id = parseInt(document.getElementById('assign_bus').value)
      const driver_id = parseInt(document.getElementById('assign_driver').value)
      const route_id = parseInt(document.getElementById('assign_route').value)

      if (!bus_id || !driver_id || !route_id) {
        showMessage('assignMessage', 'Please fill in all assignment fields', 'error')
        return
      }

      try {
        const res = await fetch(`${api}/assign`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ bus_id, driver_id, route_id })
        })
        
        if (!res.ok) {
          const errorData = await res.json()
          throw new Error(errorData.error || `HTTP error! status: ${res.status}`)
        }
        
        const data = await res.json()

        showMessage('assignMessage', `‚úÖ Assignment completed! Bus ${bus_id} ‚Üí Driver ${driver_id} ‚Üí Route ${route_id}`, 'success')
        document.getElementById('assign_bus').value = ''
        document.getElementById('assign_driver').value = ''
        document.getElementById('assign_route').value = ''
        loadMetrics()
      } catch (e) {
        console.error('Assignment error:', e)
        showMessage('assignMessage', `Error: ${e.message}`, 'error')
      }
    })

    // Set today's date as default
    document.getElementById('assignDate').valueAsDate = new Date()

    // Load initial metrics
    loadMetrics()
  </script>
</body>
</html>